# ğŸ“– æ¯æ—¥å¸‚åœºè¿½è¸ª - ä½¿ç”¨æŒ‡å—

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•ä½¿ç”¨å’Œé…ç½®æ¯æ—¥å¸‚åœºè¿½è¸ªæœåŠ¡ï¼ŒåŒ…æ‹¬ Twitterã€å¾®ä¿¡å…¬ä¼—å·ç­‰æ•°æ®æºçš„é…ç½®æ–¹æ³•ã€‚

---

## ç›®å½•

- [é…ç½®æ–‡ä»¶è¯´æ˜](#é…ç½®æ–‡ä»¶è¯´æ˜)
- [Twitter è´¦å·é…ç½®](#twitter-è´¦å·é…ç½®)
- [å¾®ä¿¡å…¬ä¼—å·é…ç½®](#å¾®ä¿¡å…¬ä¼—å·é…ç½®)
- [æ—¶é—´è¿‡æ»¤é…ç½®](#æ—¶é—´è¿‡æ»¤é…ç½®)
- [å…¨æ–‡æŠ“å–é…ç½®](#å…¨æ–‡æŠ“å–é…ç½®)
- [API æ¥å£è¯´æ˜](#api-æ¥å£è¯´æ˜)
- [è‡ªå®šä¹‰æŠ¥å‘Šå†…å®¹](#è‡ªå®šä¹‰æŠ¥å‘Šå†…å®¹)

---

## é…ç½®æ–‡ä»¶è¯´æ˜

æ‰€æœ‰é…ç½®éƒ½åœ¨ `config/config.yaml` æ–‡ä»¶ä¸­ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š

```yaml
# 1. Twitter/Nitter é…ç½®
twitter:
  enabled: true
  nitter_instance: "http://172.31.42.175:8080"
  accounts: { ... }

# 2. å¾®ä¿¡å…¬ä¼—å·é…ç½®  
wechat:
  enabled: true
  service_url: "http://172.31.42.175:3001"
  auth_key: "ä½ çš„auth_key"
  accounts: { ... }
```

---

## Twitter è´¦å·é…ç½®

### é…ç½®ä½ç½®

`config/config.yaml` â†’ `twitter.accounts`

### é…ç½®æ ¼å¼

æŒ‰åˆ†ç±»ç»„ç»‡ Twitter è´¦å·ï¼š

```yaml
twitter:
  enabled: true
  nitter_instance: "http://ä½ çš„IP:8080"
  
  # æ¯ä¸ªç”¨æˆ·æœ€å¤šè·å–çš„æ¨æ–‡æ•°
  max_tweets_per_user: 10
  
  # æŒ‰åˆ†ç±»ç»„ç»‡è´¦å·
  accounts:
    # è´¢ç»ç±»
    finance:
      - "unusual_whales"    # å¼‚å¸¸é²¸é±¼ - æœŸæƒæ•°æ®
      - "WatcherGuru"       # å¿«è®¯
      - "zerohedge"         # è´¢ç»è¯„è®º
      
    # åŠ å¯†è´§å¸ç±»
    crypto:
      - "whale_alert"       # å¤§é¢è½¬è´¦ç›‘æ§
      - "cz_binance"        # å¸å®‰åˆ›å§‹äºº
      - "VitalikButerin"    # ä»¥å¤ªåŠåˆ›å§‹äºº
      - "DefiLlama"         # DeFi æ•°æ®
      
    # AI/ç§‘æŠ€ç±»
    tech:
      - "elonmusk"          # é©¬æ–¯å…‹
      - "sama"              # OpenAI CEO
      - "OpenAI"            # OpenAI å®˜æ–¹
      - "ylecun"            # Meta AI è´Ÿè´£äºº
```

### æ·»åŠ æ–°è´¦å·

1. ç¡®å®šè´¦å·åˆ†ç±»ï¼ˆfinance/crypto/tech æˆ–è‡ªå®šä¹‰ï¼‰
2. æ·»åŠ  Twitter ç”¨æˆ·åï¼ˆä¸å¸¦ @ï¼‰
3. é‡å»º Docker é•œåƒä½¿é…ç½®ç”Ÿæ•ˆ

```bash
# ç¼–è¾‘é…ç½®
nano config/config.yaml

# é‡å»ºå¹¶é‡å¯
sudo docker build -f docker/Dockerfile.market -t finradar-market:latest .
cd docker && sudo docker compose -f docker-compose-market.yml restart
```

### æ¨èçš„è´¢ç» Twitter è´¦å·

| è´¦å· | ç±»å‹ | è¯´æ˜ |
|-----|------|------|
| `unusual_whales` | æœŸæƒ | å¼‚å¸¸æœŸæƒæ´»åŠ¨ç›‘æ§ |
| `WatcherGuru` | å¿«è®¯ | åŠ å¯†/è´¢ç»å¿«è®¯ |
| `whale_alert` | é“¾ä¸Š | å¤§é¢è½¬è´¦ç›‘æ§ |
| `zerohedge` | å®è§‚ | é‡‘èå¸‚åœºè¯„è®º |
| `MacroAlf` | å®è§‚ | å®è§‚ç»æµåˆ†æ |
| `DefiLlama` | DeFi | DeFi TVL æ•°æ® |

---

## å¾®ä¿¡å…¬ä¼—å·é…ç½®

### é…ç½®ä½ç½®

`config/config.yaml` â†’ `wechat.accounts`

### é…ç½®æ ¼å¼

```yaml
wechat:
  enabled: true
  service_url: "http://ä½ çš„IP:3001"
  auth_key: "ä½ çš„auth_key"
  timeout: 30
  
  # æ–‡ç« å…¨æ–‡æŠ“å–é…ç½®
  fetch_content: true                   # æ˜¯å¦æŠ“å–æ–‡ç« å…¨æ–‡å†…å®¹
  content_delay: 0.5                    # æŠ“å–å…¨æ–‡ä¹‹é—´çš„å»¶è¿Ÿï¼ˆç§’ï¼‰
  
  # æ¯ä¸ªå…¬ä¼—å·è·å–çš„æ–‡ç« æ•°
  max_articles_per_account: 20
  
  # æ—¶é—´è¿‡æ»¤ï¼šåªè·å–æœ€è¿‘ N å°æ—¶çš„æ–‡ç« ï¼ˆé»˜è®¤24å°æ—¶ï¼‰
  max_age_hours: 24
  
  # æŒ‰åˆ†ç±»ç»„ç»‡å…¬ä¼—å·
  accounts:
    # è´¢ç»åª’ä½“
    finance:
      - "è´¢è”ç¤¾"
      - "è´¢ç»æ‚å¿—"
      - "æ¯æ—¥ç»æµæ–°é—»"
      - "Windä¸‡å¾—"
      - "åˆ¸å•†ä¸­å›½"
      - "ä¸­å›½è¯åˆ¸æŠ¥"
      
    # åŠ å¯†è´§å¸
    crypto:
      - "é“¾æ•æ‰‹ChainCatcher"
      - "å´è¯´Real"
      - "Web3å°å¾‹"
      
    # ç§‘æŠ€èµ„è®¯
    tech:
      - "36æ°ª"
      - "é’›åª’ä½“"
      - "æ–°æ™ºå…ƒ"
      - "æœºå™¨ä¹‹å¿ƒ"
      - "æ™šç‚¹LatePost"
      
    # é‡åŒ–/æ•°æ®
    quant:
      - "é‡åŒ–æŠ•èµ„ä¸æœºå™¨å­¦ä¹ "
      - "LLMQuant"
      - "QuantML"
```

### æ·»åŠ /ä¿®æ”¹å…¬ä¼—å·

ç›´æ¥ç¼–è¾‘ `config/config.yaml` ä¸­çš„ `wechat.accounts` éƒ¨åˆ†ï¼š

```bash
# ç¼–è¾‘é…ç½®
nano config/config.yaml

# åœ¨å¯¹åº”åˆ†ç±»ä¸‹æ·»åŠ å…¬ä¼—å·åç§°ï¼ˆå¿…é¡»æ˜¯å…¬ä¼—å·çš„å‡†ç¡®åç§°ï¼‰
# ä¾‹å¦‚åœ¨ finance åˆ†ç±»ä¸‹æ·»åŠ ï¼š
#   - "åå°”è¡—è§é—»"

# é‡å»ºå¹¶é‡å¯
sudo docker build -f docker/Dockerfile.market -t finradar-market:latest .
cd docker && sudo docker compose -f docker-compose-market.yml restart
```

### å¦‚ä½•æŸ¥æ‰¾å…¬ä¼—å·å‡†ç¡®åç§°ï¼Ÿ

1. åœ¨å¾®ä¿¡ä¸­æœç´¢å…¬ä¼—å·
2. è¿›å…¥å…¬ä¼—å·ä¸»é¡µ
3. ç‚¹å‡»å³ä¸Šè§’ `...` â†’ `æ›´å¤šèµ„æ–™`
4. å¤åˆ¶ã€Œåç§°ã€å­—æ®µçš„å‡†ç¡®å†…å®¹

---

## æ—¶é—´è¿‡æ»¤é…ç½®

### åŠŸèƒ½è¯´æ˜

æ—¶é—´è¿‡æ»¤åŠŸèƒ½å…è®¸ä½ åªè·å–æŒ‡å®šæ—¶é—´èŒƒå›´å†…çš„æ–‡ç« ï¼Œé¿å…é‡å¤æŠ“å–æ—§å†…å®¹ã€‚

### é…ç½®å‚æ•°

```yaml
wechat:
  # æ—¶é—´è¿‡æ»¤ï¼šåªè·å–æœ€è¿‘ N å°æ—¶çš„æ–‡ç« 
  max_age_hours: 24    # é»˜è®¤24å°æ—¶
```

### é…ç½®ç¤ºä¾‹

| é…ç½®å€¼ | è¯´æ˜ |
|--------|------|
| `max_age_hours: 24` | åªæŠ“å–è¿‡å» 24 å°æ—¶çš„æ–‡ç« ï¼ˆé»˜è®¤ï¼‰ |
| `max_age_hours: 12` | åªæŠ“å–è¿‡å» 12 å°æ—¶çš„æ–‡ç«  |
| `max_age_hours: 48` | æŠ“å–è¿‡å» 48 å°æ—¶ï¼ˆ2å¤©ï¼‰çš„æ–‡ç«  |
| `max_age_hours: 0` | ä¸é™åˆ¶æ—¶é—´ï¼ŒæŠ“å–æ‰€æœ‰æ–‡ç«  |

### å·¥ä½œåŸç†

1. ä»æ¯ä¸ªå…¬ä¼—å·è·å–æœ€æ–°çš„ `max_articles_per_account` ç¯‡æ–‡ç« 
2. æ ¹æ®æ–‡ç« çš„ `publish_time`ï¼ˆå‘å¸ƒæ—¶é—´ï¼‰è¿›è¡Œè¿‡æ»¤
3. åªä¿ç•™ `å‘å¸ƒæ—¶é—´ >= å½“å‰æ—¶é—´ - max_age_hours` çš„æ–‡ç« 
4. æŒ‰å‘å¸ƒæ—¶é—´å€’åºæ’åˆ—ï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰
5. æœ€å¤šè¿”å› 50 ç¯‡æ–‡ç« 

### ä½¿ç”¨å»ºè®®

- **å®æ—¶ç›‘æ§**ï¼šè®¾ç½®ä¸º `12` æˆ– `24` å°æ—¶
- **æ¯æ—¥æ±‡æ€»**ï¼šè®¾ç½®ä¸º `24` å°æ—¶
- **å‘¨æŠ¥æ±‡æ€»**ï¼šè®¾ç½®ä¸º `168`ï¼ˆ7å¤© Ã— 24å°æ—¶ï¼‰
- **è°ƒè¯•æµ‹è¯•**ï¼šè®¾ç½®ä¸º `0` ä¸é™åˆ¶

---

## å…¨æ–‡æŠ“å–é…ç½®

### åŠŸèƒ½è¯´æ˜

å…¨æ–‡æŠ“å–åŠŸèƒ½å¯ä»¥è·å–å¾®ä¿¡å…¬ä¼—å·æ–‡ç« çš„å®Œæ•´æ­£æ–‡å†…å®¹ï¼Œè€Œä¸ä»…ä»…æ˜¯æ ‡é¢˜å’Œæ‘˜è¦ã€‚

### é…ç½®å‚æ•°

```yaml
wechat:
  # æ˜¯å¦æŠ“å–æ–‡ç« å…¨æ–‡å†…å®¹ï¼ˆä¼šå¢åŠ æŠ“å–æ—¶é—´ï¼‰
  fetch_content: true
  
  # æŠ“å–æ¯ç¯‡æ–‡ç« å…¨æ–‡ä¹‹é—´çš„å»¶è¿Ÿï¼ˆç§’ï¼‰ï¼Œé¿å…è¢«å°
  content_delay: 0.5
```

### é…ç½®è¯´æ˜

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `fetch_content` | `true` | æ˜¯å¦å¯ç”¨å…¨æ–‡æŠ“å– |
| `content_delay` | `0.5` | æ¯ç¯‡æ–‡ç« æŠ“å–é—´éš”ï¼ˆç§’ï¼‰ |

### æ³¨æ„äº‹é¡¹

1. **æŠ“å–æ—¶é—´å¢åŠ **ï¼šå¯ç”¨å…¨æ–‡æŠ“å–åï¼Œæ¯ç¯‡æ–‡ç« éœ€è¦é¢å¤–è¯·æ±‚å¾®ä¿¡æœåŠ¡å™¨ï¼ŒæŠ“å–æ—¶é—´ä¼šæ˜¾è‘—å¢åŠ 
2. **å»¶è¿Ÿè®¾ç½®**ï¼šå»ºè®®ä¿æŒ `content_delay: 0.5` æˆ–æ›´é«˜ï¼Œé¿å…è¯·æ±‚è¿‡äºé¢‘ç¹è¢«å°ç¦
3. **å†…å®¹æ ¼å¼**ï¼šæŠ“å–çš„å…¨æ–‡ä¸ºçº¯æ–‡æœ¬æ ¼å¼ï¼Œå·²å»é™¤ HTML æ ‡ç­¾

### è¾“å‡ºæ ¼å¼

å¯ç”¨å…¨æ–‡æŠ“å–åï¼ŒJSON è¾“å‡ºä¸­ä¼šåŒ…å« `content` å­—æ®µï¼š

```json
{
  "articles": [
    {
      "title": "æ–‡ç« æ ‡é¢˜",
      "author": "ä½œè€…",
      "account_name": "å…¬ä¼—å·åç§°",
      "publish_time": "2026-02-03T16:05:29",
      "url": "https://mp.weixin.qq.com/s/xxx",
      "digest": "æ‘˜è¦",
      "content": "æ–‡ç« å…¨æ–‡å†…å®¹..."
    }
  ]
}
```

### ç¦ç”¨å…¨æ–‡æŠ“å–

å¦‚æœåªéœ€è¦æ–‡ç« æ ‡é¢˜å’Œé“¾æ¥ï¼Œå¯ä»¥ç¦ç”¨å…¨æ–‡æŠ“å–ä»¥åŠ å¿«é€Ÿåº¦ï¼š

```yaml
wechat:
  fetch_content: false    # ç¦ç”¨å…¨æ–‡æŠ“å–
```

---

## API æ¥å£è¯´æ˜

### å¾®ä¿¡å…¬ä¼—å· API

æœåŠ¡åœ°å€: `http://ä½ çš„IP:3001`

#### 1. æœç´¢å…¬ä¼—å·

```bash
# è¯·æ±‚
curl -s "http://IP:3001/api/public/v1/account?keyword=è´¢è”ç¤¾&size=5" \
  -H "X-Auth-Key: ä½ çš„auth_key"

# å“åº”
{
  "base_resp": {"ret": 0, "err_msg": "ok"},
  "list": [
    {
      "fakeid": "Mzg5MzEyNzEwNQ==",
      "nickname": "è´¢è”ç¤¾",
      "alias": "cailianpress",
      "signature": "è´¢è”ç¤¾æ˜¯..."
    }
  ]
}
```

#### 2. è·å–æ–‡ç« åˆ—è¡¨

```bash
# è¯·æ±‚ï¼ˆéœ€è¦å…ˆé€šè¿‡æœç´¢è·å– fakeidï¼‰
curl -s "http://IP:3001/api/public/v1/article?fakeid=Mzg5MzEyNzEwNQ==&size=10" \
  -H "X-Auth-Key: ä½ çš„auth_key"

# å“åº”
{
  "base_resp": {"ret": 0, "err_msg": "ok"},
  "articles": [
    {
      "title": "æ–‡ç« æ ‡é¢˜",
      "link": "https://mp.weixin.qq.com/s/xxx",
      "create_time": 1706956800,
      "digest": "æ–‡ç« æ‘˜è¦...",
      "author_name": "ä½œè€…"
    }
  ]
}
```

#### 3. éªŒè¯ Auth Key

```bash
curl -s "http://IP:3001/api/public/v1/authkey" \
  -H "X-Auth-Key: ä½ çš„auth_key"

# æœ‰æ•ˆè¿”å›
{"code": 0, "data": "ä½ çš„auth_key"}

# æ— æ•ˆè¿”å›
{"code": -1, "msg": "AuthKey not found"}
```

### Nitter (Twitter) API

æœåŠ¡åœ°å€: `http://ä½ çš„IP:8080`

#### è·å–ç”¨æˆ· RSS

```bash
# è¯·æ±‚
curl -s "http://IP:8080/elonmusk/rss"

# è¿”å› XML æ ¼å¼çš„ RSS Feed
<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
  <channel>
    <title>Elon Musk / @elonmusk</title>
    <item>
      <title>æ¨æ–‡å†…å®¹...</title>
      <pubDate>Mon, 03 Feb 2026 12:00:00 GMT</pubDate>
    </item>
  </channel>
</rss>
```

---

## è‡ªå®šä¹‰æŠ¥å‘Šå†…å®¹

### æŠ¥å‘Šè¾“å‡ºä½ç½®

- æ–‡æœ¬æŠ¥å‘Š: `output/market/market_report_YYYYMMDD.txt`
- JSON æ•°æ®: `output/market/market_data_YYYYMMDD.json`

### æŠ¥å‘ŠåŒ…å«å†…å®¹

æŠ¥å‘ŠæŒ‰ä»¥ä¸‹é¡ºåºå±•ç¤ºæ•°æ®ï¼š

1. ğŸ‡¨ğŸ‡³ Aè‚¡å¸‚åœº - ä¸»è¦æŒ‡æ•°æ¶¨è·Œ
2. ğŸ¥‡ è´µé‡‘å± - é»„é‡‘ç™½é“¶ä»·æ ¼
3. â‚¿ åŠ å¯†è´§å¸ - BTC/ETH/SOL
4. ğŸ“ˆ æœŸè´§å¸‚åœº - å•†å“æœŸè´§
5. ğŸ’» GitHub è¶‹åŠ¿ - çƒ­é—¨é¡¹ç›®
6. ğŸ¦ Twitter çƒ­ç‚¹ - KOL åŠ¨æ€
7. ğŸ“± å¾®ä¿¡å…¬ä¼—å· - æ–‡ç« åˆ—è¡¨

### ç¦ç”¨æŸä¸ªæ•°æ®æº

åœ¨ `config/config.yaml` ä¸­è®¾ç½® `enabled: false`ï¼š

```yaml
twitter:
  enabled: false  # ç¦ç”¨ Twitter

wechat:
  enabled: false  # ç¦ç”¨å¾®ä¿¡å…¬ä¼—å·
```

### è°ƒæ•´æŠ“å–é¢‘ç‡

ç¼–è¾‘ `docker/entrypoint-market.sh`ï¼š

```bash
# é»˜è®¤æ¯ 30 åˆ†é’Ÿ
CRON_SCHEDULE="${CRON_SCHEDULE:-*/30 * * * *}"

# æ¯å°æ—¶æ•´ç‚¹
CRON_SCHEDULE="${CRON_SCHEDULE:-0 * * * *}"

# æ¯å¤©æ—©ä¸Š 8 ç‚¹
CRON_SCHEDULE="${CRON_SCHEDULE:-0 8 * * *}"
```

---

## Python ä»£ç è°ƒç”¨ç¤ºä¾‹

å¦‚æœéœ€è¦åœ¨è‡ªå·±çš„ä»£ç ä¸­è°ƒç”¨ï¼š

### æŠ“å–å¾®ä¿¡å…¬ä¼—å·æ–‡ç« 

```python
import asyncio
from fin_module.fetcher.wechat_article import WechatArticleFetcher

async def main():
    fetcher = WechatArticleFetcher(
        base_url="http://172.31.42.175:3001",
        auth_key="ä½ çš„auth_key"
    )
    
    # æœç´¢å…¬ä¼—å·
    accounts = await fetcher.search_accounts("è´¢è”ç¤¾", limit=1)
    print(f"æ‰¾åˆ°å…¬ä¼—å·: {accounts[0].name}")
    
    # è·å–æ–‡ç« 
    articles = await fetcher.get_articles(
        fakeid=accounts[0].fakeid,
        count=10,
        account_name=accounts[0].name
    )
    
    for article in articles:
        print(f"[{article.publish_time}] {article.title}")
    
    await fetcher.close()

asyncio.run(main())
```

### æŠ“å– Twitter åŠ¨æ€

```python
import asyncio
from fin_module.fetcher.nitter_rss import NitterRSSFetcher

async def main():
    fetcher = NitterRSSFetcher(
        nitter_instance="http://172.31.42.175:8080"
    )
    
    # è·å–å•ä¸ªç”¨æˆ·æ¨æ–‡
    tweets = await fetcher.fetch_user_tweets("elonmusk", max_tweets=5)
    
    for tweet in tweets:
        print(f"[@{tweet.author}] {tweet.content[:100]}...")
    
    await fetcher.close()

asyncio.run(main())
```

---

## å¿«é€Ÿå‚è€ƒ

### å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo docker ps

# æŸ¥çœ‹æ—¥å¿—
sudo docker logs finradar-market --tail 100

# æ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡æŠ“å–
sudo docker exec finradar-market python -m fin_module

# é‡å¯æœåŠ¡
cd docker && sudo docker compose -f docker-compose-market.yml restart

# é‡å»ºå¹¶é‡å¯
sudo docker build -f docker/Dockerfile.market -t finradar-market:latest . && \
cd docker && sudo docker compose -f docker-compose-market.yml up -d
```

### é…ç½®æ–‡ä»¶ä½ç½®

| æ–‡ä»¶ | ç”¨é€” |
|-----|------|
| `config/config.yaml` | ä¸»é…ç½®æ–‡ä»¶ï¼ˆTwitter/å¾®ä¿¡è´¦å·ã€API åœ°å€ï¼‰ |
| `fin_module/nitter/sessions.jsonl` | Twitter Token |
| `fin_module/wechat-article/data/kv/cookie/` | å¾®ä¿¡ Auth Keyï¼ˆæ–‡ä»¶åï¼‰ |

---

*æ–‡æ¡£æ›´æ–°æ—¥æœŸ: 2026-02-03*
